<!DOCTYPE html>
<html>
<head>
    <title>WebSocket Client</title>
</head>
<body>
<script>
    const socket = new WebSocket('ws://localhost:8080/ws/json');

    socket.onopen = function(e) {
        console.log('Connection established');
    };

    socket.onmessage = function(event) {
        const message = JSON.parse(event.data);
        console.log('Received:', message);
    };

    socket.onclose = function(event) {
        if (event.wasClean) {
            console.log(`Connection closed cleanly, code=${event.code}, reason=${event.reason}`);
        } else {
            console.log('Connection died');
        }
    };

    socket.onerror = function(error) {
        console.log(`WebSocket error: ${error.message}`);
    };

    function sendMessage() {
        const message = {
            type: 'message',
            content: 'Hello from browser',
            sender: 'browser-' + Math.random().toString(36).substring(2, 10)
        };
        socket.send(JSON.stringify(message));
    }
</script>

<button onclick="sendMessage()">Send Message</button>
</body>
</html>